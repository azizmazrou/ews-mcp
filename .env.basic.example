# EWS MCP Server - Basic Authentication Configuration
# For testing and on-premises Exchange servers

# ============================================================================
# Exchange Server Configuration
# ============================================================================

# Your Exchange EWS endpoint URL
# For on-premises: https://mail.company.com/EWS/Exchange.asmx
# For Office 365: https://outlook.office365.com/EWS/Exchange.asmx
EWS_SERVER_URL=https://mail.company.com/EWS/Exchange.asmx

# Your email address
EWS_EMAIL=user@company.com

# Autodiscovery (set to true to automatically find Exchange server)
# Recommended: false for on-premises, true for Office 365
EWS_AUTODISCOVER=false

# ============================================================================
# Basic Authentication (Simplest method)
# ============================================================================

EWS_AUTH_TYPE=basic

# Your Exchange username (usually same as email)
# For domain accounts, use: DOMAIN\username or username@domain.com
EWS_USERNAME=user@company.com

# Your Exchange password
EWS_PASSWORD=your-password

# ============================================================================
# Server Configuration
# ============================================================================

MCP_SERVER_NAME=ews-mcp-server

# Transport mode: stdio (for Claude Desktop) or sse (for HTTP/REST API)
MCP_TRANSPORT=stdio
MCP_HOST=0.0.0.0      # Only used when MCP_TRANSPORT=sse
MCP_PORT=8000         # Only used when MCP_TRANSPORT=sse

LOG_LEVEL=INFO

# ============================================================================
# OpenAPI/REST API Configuration (Optional)
# Only needed when MCP_TRANSPORT=sse or using with Open WebUI
# ============================================================================

# External URL for API access (e.g., https://ews-api.company.com)
# Leave commented for default: http://localhost:8000
# API_BASE_URL=https://ews-api.example.com

# Internal Docker network URL (e.g., http://ews-mcp:8000)
# Leave commented for default: http://ews-mcp:8000
# API_BASE_URL_INTERNAL=http://ews-mcp:8000

# Customize API metadata (optional)
# API_TITLE=Exchange Web Services (EWS) MCP API
# API_DESCRIPTION=REST API for Exchange operations via Model Context Protocol
# API_VERSION=3.0.0

# ============================================================================
# Timezone Configuration (CRITICAL for proper datetime handling)
# ============================================================================

# Use IANA timezone names: UTC, America/New_York, Europe/London, Asia/Riyadh
# Do NOT use UTC offsets like UTC+03:00 - they will cause errors
TIMEZONE=UTC

# ============================================================================
# Performance Settings
# ============================================================================

ENABLE_CACHE=true
CACHE_TTL=300
CONNECTION_POOL_SIZE=10
REQUEST_TIMEOUT=30

# ============================================================================
# Rate Limiting
# ============================================================================

RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=25

# ============================================================================
# Feature Flags (Enable/Disable specific tools)
# ============================================================================

ENABLE_EMAIL=true
ENABLE_CALENDAR=true
ENABLE_CONTACTS=true
ENABLE_TASKS=true
ENABLE_FOLDERS=true
ENABLE_ATTACHMENTS=true

# ============================================================================
# Security
# ============================================================================

ENABLE_AUDIT_LOG=true
MAX_ATTACHMENT_SIZE=157286400

# ============================================================================
# Quick Setup Instructions
# ============================================================================
#
# 1. Copy this file: cp .env.basic.example .env
# 2. Edit the values above with your credentials
# 3. Run: docker run -d --env-file .env ghcr.io/azizmazrou/ews-mcp:latest
# 4. Check logs: docker logs <container-name>
#
# For Claude Desktop, use this configuration:
# {
#   "mcpServers": {
#     "ews": {
#       "command": "docker",
#       "args": ["run", "-i", "--rm", "--env-file", "/path/to/.env", "ghcr.io/azizmazrou/ews-mcp:latest"]
#     }
#   }
# }
